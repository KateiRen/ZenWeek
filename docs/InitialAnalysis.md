# Initial Analysis: ZenWeek Codebase vs PRD and Best Practices

## 1. Overview
This document analyzes the current ZenWeek codebase (as of September 2025) against the ZenWeek_PRD.md requirements and general coding best practices. It identifies gaps, risks, and concrete steps needed to reach MVP and improve maintainability.

---

## 2. PRD Requirements Coverage

### Core Features (MVP)
| Feature | Status | Notes |
|---------|--------|-------|
| Add/edit/delete tasks for each day | ✅ | Implemented in Flask routes and templates |
| Drag-and-drop tasks between days | ✅ | Fully implemented via inline JS in `index.html` |
| Persistent storage (SQLite) | ✅ | Uses SQLite via `prod.sqlite3` |
| Basic code documentation | ❌ | Minimal docstrings/comments; needs improvement |
| 4–6 unit tests | ❌ | No test files found |
| Analyze code and suggest improvements | ⚠️ | This document addresses this |
| Improve drag-and-drop | ⚠️ | Needs review/JS refactor |

### Stretch Goals
- Automated DB backups: ❌ Not present
- Weekly summary view: ❌ Not present
- Simple chart: ❌ Not present
- Open-task badge: ❌ Not present
- Auto-focus new task field: ❌ Not present

---

## 3. Coding Best Practices Review

### Strengths
- Clear separation of config, schema, and app logic
- Uses environment variables for secrets and DB URIs
- Database schema is normalized and simple
- UI uses Bootstrap for responsive design

### Issues & Risks
- **No automated tests**: No test files or test framework present
- **No requirements.txt**: Dependency management is manual
- **No linter/formatter config**: Code style is inconsistent
- **Minimal code comments/docstrings**: Hard for new contributors
- **Potential SQL injection**: Some queries use string interpolation
- **No error handling in routes**: Most routes assume DB success
- **Frontend JS is inline**: All drag-and-drop and task logic is implemented as inline JavaScript in `index.html`, making it harder to maintain, test, or reuse
- **No static analysis or CI**: No lint/test automation
- **No backup/restore scripts**: Data loss risk

---

## 4. Steps to Reach MVP & Best Practices

### Immediate (MVP)
1. **Add requirements.txt** with Flask, python-dotenv, etc.
2. **Add 4–6 unit tests** (e.g., for DB, routes, utils)
3. **Add docstrings and key comments** in `app.py` and helpers
4. **Refactor SQL queries** to use parameterized queries
5. **Extract/organize drag-and-drop JS** (currently inline in `index.html`; move to a separate JS file for maintainability)
6. **Add error handling** for DB and user input
7. **Add linter config** (e.g., flake8 or black)

### Next Steps (Best Practices)
8. Add backup/restore script for DB
9. Add weekly summary and open-task badge (stretch)
10. Add CI config for lint/test automation
11. Improve UX: auto-focus new task, consistent box sizes, etc.
12. Update README with setup/test instructions

---

## 5. Summary Table
| Area | Status | Action |
|------|--------|--------|
| Core features | Most present | Minor fixes, add tests |
| Code quality | Needs work | Add docs, linter, error handling |
| Testing | Missing | Add tests, CI |
| Security | Needs work | Parameterize SQL |
| UX polish | Needed | See stretch goals |

---

## 6. References
- See `ZenWeek_PRD.md` for full requirements
- See `To Do.md` for additional wishlist items

---

*Generated by GitHub Copilot, September 2025.*
